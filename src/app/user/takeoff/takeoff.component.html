<div class="inner-content" style='padding-left:20px;overflow:auto;width:100%;height: 90%;'>
    <div nz-row>&nbsp;</div>
    <div nz-row>
        <div nz-col nzSpan="4">
            <i nz-icon nzType="menu" nzTheme="outline" style="font-size: 20px;" (click)="open()"></i>
        </div>
        <div nz-col nzSpan="20" style='text-align:center'>
            <h6> TakeOff Recommendations</h6>
        </div>
    </div>
    <div nz-row>&nbsp;</div>
    <ng-container *ngIf='loading'>
        <div nz-row>

            &nbsp;
        </div>

        <div nz-row>
            <div nz-col nzSpan="24" style='text-align: center'>
                <nz-spin nzTip="Please wait....Loading Images" nzSimple [nzSize]="'large'"></nz-spin>
            </div>
        </div>
    </ng-container>

    <ng-container *ngIf='!loading'>



        <nz-drawer [nzClosable]="false" [nzVisible]="visible" [nzPlacement]="'left'" nzTitle="Menu"
            (nzOnClose)="close()">
            <ng-container *nzDrawerContent>
                <ul nz-menu nzTheme="light" nzMode="inline">
                    <li nz-menu-item nzSelected> <i nz-icon nzType="home"> </i><span> <a [routerLink]="['/customer']">
                                TakeOff Recommends </a>
                        </span> </li>

                    <li nz-submenu nzTitle="Coupons" nzIcon="user">
                        <ul>
                            <li nz-menu-item><a [routerLink]="['complimentary']">Complimentary</a></li>
                            <li nz-menu-item><a [routerLink]="['free']">Free</a></li>
                            <li nz-menu-item><a [routerLink]="['daily']">Daily</a></li>


                        </ul>
                    </li>

                </ul>
            </ng-container>
        </nz-drawer>



        <div class='row'>

            <div class="col-lg-4" *ngFor="let item of coupons">


                <div nz-row class="coupon" style=' width:375px;height:350px;'>
                    <div nz-col nzSpan='24'>
                        <div class="container" nz-col nzSpan="24" style='text-align: left;  padding: 2px 16px;
                    background-color: #f1f1f1;'>

                            <h6> {{item.vendorName}}</h6>

                        </div>


                        <div class="container" style='width:365px;height:250px;overflow:hidden;'
                            (click)='coupon=item;previewVisible=true;'>
                            <img style=' width:350px;height:250px ;' id="image" [src]="item.image">
                            <img [class]="item.image_align" [src]="item.logo"
                                style='max-width: 20%; max-height: 20%;border: 1px solid  #bbb;'>


                            <div [class]="item.footer_align" [style.font-family]='item.footer_font'
                                [style.color]='item.footer_color' [style.text-decoration]='item.footer_decoration'
                                [style.font-weight]='item.footer_bold' [style.font-style]='item.footer_style'
                                [style.font-size.px]="item.footer_size" [innerHTML]="item.footer "></div>







                            <div [class]="item.header_align" [style.font-family]='item.header_font'
                                [style.color]='item.header_color' [style.text-decoration]='item.header_decoration'
                                [style.font-weight]='item.header_bold' [style.font-style]='item.header_style'
                                [style.font-size.px]="item.header_size" [innerHTML]="item.header ">



                            </div>



                            <div [class]="item.body_align" [style.font-family]='item.body_font'
                                [style.color]='item.body_color' [style.text-decoration]='item.body_decoration'
                                [style.font-weight]='item.body_bold' [style.font-style]="item.body_style"
                                [style.font-size.px]="item.body_size" [innerHTML]="item.body ">
                            </div>



                        </div>
                    </div>

                    <div class="container" nz-col nzSpan="24" style='text-align: center;  padding: 2px 16px;
                background-color: #f1f1f1;'>

                        <h6 style='color:red'>Expires on {{item.expireTime}}</h6>
                        <i nz-icon nzType="gift" nzTheme="outline" style="font-size: 20px;" class='icon'
                            (click)='viewRedemption(item)'></i> &nbsp;
                        <i nz-icon nzType="shop" nzTheme="outline" style="font-size: 20px;" class='icon'></i>&nbsp;
                        <i nz-icon nzType="like" nzTheme="outline" style="font-size: 20px;" class='icon'></i>&nbsp;
                        <i nz-icon nzType="dislike" nzTheme="outline" style="font-size: 20px;" class='icon'></i>&nbsp;
                        <i nz-icon nzType="download" nzTheme="outline" style="font-size: 20px;" class='icon'></i>&nbsp;

                    </div>


                </div>

                <hr />

            </div>
        </div>

    </ng-container>


    <nz-modal [nzVisible]="previewVisible" [nzContent]="modalContent" [nzFooter]="null" (nzOnCancel)="cancel()">
        <ng-template #modalContent>



            <div style='overflow:auto;'>
                <div class="container" style='width:365px;height:250px;overflow:hidden;'>
                    <img style=' width:350px;height:250px;' id="image" [src]="coupon.image">
                    <img [class]="coupon.image_align" [src]="coupon.logo"
                        style='max-width: 20%; max-height: 20%;border: 1px solid  #bbb;'>


                    <div [class]="coupon.footer_align" [style.font-family]='coupon.footer_font'
                        [style.color]='coupon.footer_color' [style.text-decoration]='coupon.footer_decoration'
                        [style.font-weight]='coupon.footer_bold' [style.font-style]='coupon.footer_style'
                        [style.font-size.px]="coupon.footer_size" [innerHTML]="coupon.footer "></div>







                    <div [class]="coupon.header_align" [style.font-family]='coupon.header_font'
                        [style.color]='coupon.header_color' [style.text-decoration]='coupon.header_decoration'
                        [style.font-weight]='coupon.header_bold' [style.font-style]='coupon.header_style'
                        [style.font-size.px]="coupon.header_size" [innerHTML]="coupon.header ">



                    </div>



                    <div [class]="coupon.body_align" [style.font-family]='coupon.body_font'
                        [style.color]='coupon.body_color' [style.text-decoration]='coupon.body_decoration'
                        [style.font-weight]='coupon.body_bold' [style.font-style]="coupon.body_style"
                        [style.font-size.px]="coupon.body_size" [innerHTML]="coupon.body ">
                    </div>



                </div>


            </div>



        </ng-template>
    </nz-modal>

</div>



<nz-modal [nzVisible]="redeemVisible" [nzContent]="redeemContent" [nzFooter]="null" (nzOnCancel)="redeemCancel()">
    <ng-template #redeemContent>
        <h3>
            <ng-container *ngIf='redeemChecked'>
                <span nz-icon nzType="arrow-left" nzTheme="outline" (click)='redeemChecked=false'> </span>
            </ng-container> Redemption
        </h3>
        <div nz-row class="container">
            <ng-container *ngIf='!redeemChecked'>
                <div nz-col nzSpan="24" style='text-align: left'>
                    <nz-collapse nzAccordion>
                        <nz-collapse-panel nzHeader="Coupon Description" nzActive="true" nzDisabled="false">
                            <p> content</p>
                        </nz-collapse-panel>
                        <nz-collapse-panel nzHeader="TakeOff Terms & Conditions" nzDisabled="false">
                            <p> TakeOff Terms & Conditions</p>
                        </nz-collapse-panel>
                    </nz-collapse>
                </div>
                <div nz-col nzSpan="24" style='text-align: center'>&nbsp;</div>
                <div nz-col nzSpan="24" style='text-align: center'>
                    <label nz-checkbox [(ngModel)]="redeemChecked" (ngModelChange) = 'generateRedemption(redeemCoupon.id,redeemCoupon.vendorId)'>I have read Coupon Description and Terms &
                        Conditions</label>
                </div>
            </ng-container>
            <ng-container *ngIf='redeemChecked'>




                <div nz-col nzSpan="24" style='text-align: center'>
                    <nz-table nzSize="small" nzShowPagination=false [nzData]="['']">
                        <thead>
                            <tr>
                                <th style='text-align:center'>Coupon ID</th>
                                <th style='text-align:center'>User ID</th>
                                <th style='text-align:center'>Vendor ID</th>

                            </tr>
                        </thead>
                        <tbody>
                            <tr style='text-align:center'>
                                <td>{{redeemCoupon.id}}</td>
                                <td>User Id</td>
                                <td>{{redeemCoupon.vendorId}}</td>
                            </tr>
                        </tbody>
                    </nz-table>
                </div>
                <div nz-col nzSpan="24" style='text-align: center'>&nbsp;</div>

                <div nz-col nzSpan="24" style='text-align: center'><b><i><u>Passcode To Vendor</u></i></b></div>

                <div nz-col nzSpan="24" style='text-align: center'>&nbsp;</div>
                <div nz-col nzSpan="24" style='text-align: center'>
                    <input readonly nz-input style='width: 40px;' type="text" maxlength="1" [(ngModel)]="code[0]"
                        (ngModelChange)='singleChar(0)' />&nbsp;&nbsp;
                    <input readonly nz-input style='width: 40px;' type="text" maxlength="1" [(ngModel)]="code[1]"
                        (ngModelChange)='singleChar(1)' />&nbsp;&nbsp;
                    <input readonly nz-input style='width: 40px;' type="text" maxlength="1" [(ngModel)]="code[2]"
                        (ngModelChange)='singleChar(2)' />&nbsp;&nbsp;
                    <input readonly nz-input style='width: 40px;' type="text" maxlength="1" [(ngModel)]="code[3]"
                        (ngModelChange)='singleChar(3)' />&nbsp;&nbsp;
                </div>
                <div nz-col nzSpan="24" style='text-align: center'>&nbsp;</div>

                <div nz-col nzSpan="24" style='text-align: center'><b><i><u>Passcode From Vendor</u></i></b></div>

                <div nz-col nzSpan="24" style='text-align: center'>&nbsp;</div>

                <div nz-col nzSpan="24" style='text-align: center'>
                    <input nz-input style='width: 40px;' type="text" maxlength="1" [(ngModel)]="code[4]"
                        (ngModelChange)='singleChar(4)' />&nbsp;&nbsp;
                    <input nz-input style='width: 40px;' type="text" maxlength="1" [(ngModel)]="code[5]"
                        (ngModelChange)='singleChar(5)' />&nbsp;&nbsp;
                    <input nz-input style='width: 40px;' type="text" maxlength="1" [(ngModel)]="code[6]"
                        (ngModelChange)='singleChar(6)' />&nbsp;&nbsp;
                    <input nz-input style='width: 40px;' type="text" maxlength="1" [(ngModel)]="code[7]"
                        (ngModelChange)='singleChar(7)' />&nbsp;&nbsp;
                </div>
                <div nz-col nzSpan="24" style='text-align: center'>&nbsp;</div>

                <div nz-col nzSpan="24" style='text-align: center'>

                    Passcode Valid till <b><i><u>{{redemption.validTill}}</u></i></b>

                </div>

                <div nz-col nzSpan="24" style='text-align: center'>&nbsp;</div>
                <div nz-col nzSpan="24" style='text-align: center'>
                    <button nz-button nzType="default">HELP</button> &nbsp;
                    <button nz-button nzType="primary" nzShape="round" nzDanger (click)='customerRedeem()'>REDEEM</button> &nbsp;
                    <button nz-button nzType="primary" nzShape="round" (click)="redeemCancel()">CANCEL</button>
                </div>
            </ng-container>
        </div>
    </ng-template>
</nz-modal>